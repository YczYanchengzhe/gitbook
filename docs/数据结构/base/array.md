# 数组



# 什么是数组 ? 

数组是一种**线性表**结构,他使用一组**连续的内存空间**,存储**相同的数据结构**.

> 线性表 : 数据排列成线装结构,每个线性表上的数据最多只能有前后两个方向.

数组支持随机访问 , **根据下标**随机访问的时间复杂度是`O(1)`.因为数组是连续的内存空间,可以通过计算得到地址直接获取数据.数组的查找即使最快的二分查找时间复杂度也是`O(logn)`

# 数组的插入和删除
## 1.插入
```tex
最差时间复杂度 : O(n)
最好时间复杂度 : O(1)
平均时间复杂度 : O(n)
```

优化 : 如果不需要保证数据的顺序 , 可以将待插入位置的原数据放到数组的尾部,之后将数据插入.

 ![img](../resources/数据结构/array_insert.jpg) 

## 2.删除

最差时间复杂度 : $$O(n)$$
最好时间复杂度 : $$O(1)$$
平均时间复杂度 : $$O(n)$$

优化 : 将多次删除操作放在一起 , 类比 JVM的`标记清除算法`,再删除时只是对该数据进行标记,真正的删除可以再后面没有内存时候再执行.

# 容器能否替代数组

## 使用容器的优点 -- Java为例
Java的ArrayList , C++ STL的vector.都是容器类.相比于数组而言,使用容器类更方便的在于 : 
(1) 对于数组的操作已经封装好了,不需要我们在实现
(2)支持动态扩容,Java的ArrayList会在不足时候扩容1.5倍,当然由于扩容涉及到内存数据的复制,所以最好在一开始就确定需要申请的数组大小.
## 使用数组的优点 -- Java为例
(1)Java 的ArrayList无法存储基本类型,都需要使用包装类,但是自动装箱拆箱是有一定性能损耗的,所以如果特别关注性能,可以使用的数组.
(2)如果对于数据的操作简单,使用不到ArrayList提供的大多数方法,也可以直接使用数组.
(3)表示多维数组的时候,可能使用数组的方式比容器更加简单 :
```java
Object[][] array;
ArrayList<ArrayList<Object>> arrayList;
```
(4)对于业务开发,使用容器就足够了,但是如果开发底层框架,对于性能的优化要做到极致,这个时候数组就会优于容器.

## 为什么数组从0开始?
### 性能分析
数组的下标含义是偏移量,使用0作为首地址,寻址a[k]时计算方法 : 
```c
a[k]_address = base_address + k * type_size
```
如果从1开始,那么计算方式为 : 

```c
a[k]_address = base_address + (k-1) * type_size
```

需要多一次减法计算,对于cpu来说就是多了一次减法指令.
### 甩锅分析
C语言从0开始 , 所以Java , JavaScript也这么搞了,哪有那么多为什么.....
