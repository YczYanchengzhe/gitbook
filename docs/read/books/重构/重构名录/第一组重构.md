# 第一组重构



## 1.1 提炼函数

### 场景

- 按照一段代码的作用,将其提炼到独立的函数,并以这段代码的用途为这个函数命名.
- 如果你需要花时间浏览一段代码才能弄清它到底在干什么，那么就应该将其提炼到一个函数中，并根据它所做的事为其命名.

### 修改方法

- 将待提炼的代码从源函数复制到新建的目标函数中
- 仔细检查提炼出的代码，看看其中是否引用了作用域限于源函数、在提炼出的新函数中访问不到的变量。若是，以参数的形式将它们传递给新函数
- 在源函数中，将被提炼代码段替换为对目标函数的调用
- 查看其他代码是否有与被提炼的代码段相同或相似之处。如果有，考虑使用以函数调用取代内联代码令其调用提炼出的新函数
- 测试


## 1.2 内联函数

### 场景
如果代码中有太多间接层，使得系统中的所有函数都似乎只是对另一个函数的简单委托 , 这个时候考虑使用内联函数进行重构

### 修改方法
- 检查函数，确定它不具多态性 : 如果有子类继承了这个函数,那么就无法内联
- 找出这个函数的所有调用点
- 将这个函数调用点替换为函数本体
- 测试
- 删除函数定义


## 1.3 提炼变量
### 场景
表达式非常复杂而难以阅读,通过局部变量可以帮助我们将表达式分解为比较容易管理的形式.
### 修改方法
- 确认要提炼的表达式没有副作用。
- 声明一个不可修改的变量，把你想要提炼的表达式复制一份，以该表达式的结果值给这个变量赋值。
- 用这个新变量取代原来的表达式。
- 测试



## 1.4 内联变量
### 场景
变量的存在可能妨碍重构附近的代码
### 修改方法
- 检查确认变量赋值语句的右侧表达式没有副作用
- 如果变量没有被声明为不可修改，先将其变为不可修改，并执行测试。这是为了确保该变量只被赋值一次
- 找到第一处使用该变量的地方，将其替换为直接使用赋值语句的右侧表达式
- 测试


## 1.5 改变函数声明
### 场景
发现函数名字不对,或者和其做的事情不符,需要对其进行改名,可以尝试先写依据注释描述这个函数用途,再把注释变成函数的名字
### 修改方法

#### 简单做法

#### 迁移式做法



### 场景

### 修改方法

### 场景

### 修改方法

### 场景

### 修改方法




### 场景

### 修改方法