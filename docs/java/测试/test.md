# 一. 单元测试 : 

## 1.1 如何做单元测试 : 

- 单元测试方法应该每个方法是一个 case，断言充分，提示明确
- 单测要覆盖所有的 corner(角落) case
- 充分使用 mock（一切皆可 mock）
- 如果发现不好测试，则说明业务代码设计存在问题，可以反向优化代码
- 批量测试用例使用参数化单元测试
- 合理使用 before, after, setup 准备环境
- 合理使用通用测试基类
- 配合 checkstyle，coverage 等工具
- 制定单元测试覆盖率基线

## 1.2 单元测试的常见陷阱与经验

- 尽量不要访问外部数据库等外部资源
- 如果必须用数据库考虑用嵌入式 DB+ 事务自动回滚
- 防止静态变量污染导致测试无效
- 小心测试方法的顺序导致的不同环境测试失败
- 单元测试总时间特别长的问题
- 注意测试是单线程执行